<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Stellar Echoes — My Quotes</title>
<link rel="icon" href="data:;base64,iVBORw0KGgo=">
<style>
  :root{
    --bg1:#0b1020;
    --bg2:#081226;
    --card:#0f1724;
    --muted:#9aa8c0;
    --accent:#7be1ff;
    --glass: rgba(255,255,255,0.04);
    --radius:14px;
    font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    min-height:100vh;
    background: radial-gradient(1200px 700px at 10% 10%, rgba(123,225,255,0.06), transparent 8%),
                radial-gradient(900px 500px at 90% 90%, rgba(80,70,255,0.03), transparent 10%),
                linear-gradient(180deg,var(--bg1),var(--bg2));
    color:#e6eef9;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    padding:28px;
    display:flex;
    flex-direction:column;
    gap:18px;
  }

  header{
    display:flex;
    gap:18px;
    align-items:center;
    justify-content:space-between;
    max-width:1100px;
    margin:0 auto;
    width:100%;
  }
  .brand{
    display:flex;
    gap:14px;
    align-items:center;
  }
  .logo{
    width:56px;
    height:56px;
    border-radius:12px;
    background: linear-gradient(135deg,#5ee1ff22,#8b6bff22);
    display:grid;place-items:center;
    box-shadow: 0 6px 18px rgba(0,0,0,0.6), inset 0 -6px 12px rgba(255,255,255,0.02);
    font-weight:700;
    color:var(--accent);
    font-size:20px;
    border: 1px solid rgba(255,255,255,0.04);
  }
  h1{margin:0;font-size:20px;letter-spacing:0.2px}
  p.small{margin:0;color:var(--muted);font-size:13px}

  .controls{
    display:flex;
    gap:10px;
    align-items:center;
  }
  button, .btn {
    background:var(--glass);
    border:1px solid rgba(255,255,255,0.06);
    color:var(--accent);
    padding:10px 14px;
    border-radius:10px;
    cursor:pointer;
    font-weight:600;
    font-size:13px;
    backdrop-filter: blur(6px);
  }
  .btn.ghost{background:transparent;color:var(--muted);border:1px solid rgba(255,255,255,0.03)}
  .search{
    background:rgba(255,255,255,0.02);
    border-radius:12px;
    padding:8px 12px;
    display:flex;
    align-items:center;
    gap:8px;
    border:1px solid rgba(255,255,255,0.03);
  }
  .search input{
    background:transparent;border:0;outline:none;color:inherit;font-size:14px;width:220px;
  }

  main{
    max-width:1100px;margin:0 auto;width:100%;
    display:flex;gap:18px;
  }

  /* left column - add form + stats */
  .left{
    width:320px;
    min-width:260px;
  }
  .card{
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border-radius:var(--radius);
    padding:14px;
    border: 1px solid rgba(255,255,255,0.03);
    box-shadow: 0 8px 30px rgba(2,6,23,0.6);
  }
  label{display:block;font-size:12px;color:var(--muted);margin-bottom:6px}
  textarea, input[type="text"]{
    width:100%;padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);
    background:transparent;color:inherit;font-size:14px;resize:vertical;
  }
  .small-row{display:flex;gap:8px;margin-top:8px}
  .small-row input{flex:1}

  .stats{display:flex;gap:8px;flex-wrap:wrap;margin-top:12px}
  .stat{
    padding:8px 12px;border-radius:10px;background:rgba(255,255,255,0.02);font-size:13px;color:var(--muted);
  }

  /* right column - grid of quotes */
  .right{flex:1}
  .grid{
    display:grid;
    grid-template-columns: repeat(auto-fill,minmax(240px,1fr));
    gap:12px;
  }
  .quote-card{
    padding:14px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00));
    border:1px solid rgba(255,255,255,0.03);min-height:120px;display:flex;flex-direction:column;gap:10px;
  }
  .quote-text{font-size:15px;line-height:1.35;color:#eaf6ff;flex:1}
  .meta{display:flex;justify-content:space-between;align-items:center;gap:8px}
  .tags{display:flex;gap:6px;flex-wrap:wrap}
  .tag{font-size:12px;padding:6px 8px;border-radius:999px;background:rgba(255,255,255,0.02);color:var(--muted)}

  .card-actions{display:flex;gap:8px;align-items:center}
  .icon-btn{background:transparent;border:0;color:var(--muted);cursor:pointer;font-size:14px;padding:6px;border-radius:8px}
  .icon-btn:hover{color:var(--accent)}
  .fav{color:#ffd166}
  .muted{color:var(--muted)}

  footer{max-width:1100px;margin:0 auto;color:var(--muted);font-size:13px;padding-top:6px}

  @media (max-width:840px){
    main{flex-direction:column}
    .left{width:100%}
  }
</style>
</head>
<body>

<header>
  <div class="brand">
    <div class="logo">★</div>
    <div>
      <h1>Stellar Echoes</h1>
      <p class="small">A simple space to save your favorite lines — add, tag, search, and revisit.</p>
    </div>
  </div>

  <div class="controls">
    <div class="search" title="Search quotes">
      🔎 <input id="searchInput" placeholder="Search text, tag, or author..." />
    </div>
    <button id="exportBtn" class="btn">Export</button>
    <button id="importBtn" class="btn ghost">Import</button>
    <button id="newBtn" class="btn">+ New</button>
  </div>
</header>

<main>
  <div class="left" aria-label="controls column">
    <div class="card" id="editorCard">
      <label for="quoteText">Quote</label>
      <textarea id="quoteText" rows="4" placeholder="Write a line you want to save..."></textarea>

      <div class="small-row" style="margin-top:10px">
        <div style="flex:1">
          <label for="quoteAuthor">Author / Source</label>
          <input id="quoteAuthor" type="text" placeholder="Author or context (optional)">
        </div>
      </div>

      <div class="small-row" style="margin-top:10px">
        <div style="flex:1">
          <label for="quoteTags">Tags (comma separated)</label>
          <input id="quoteTags" type="text" placeholder="e.g. dev,design,dialogue">
        </div>
      </div>

      <div style="display:flex;gap:8px;margin-top:12px">
        <button id="saveBtn" class="btn">Save Quote</button>
        <button id="clearBtn" class="btn ghost">Clear</button>
      </div>

      <div class="stats" style="margin-top:12px">
        <div class="stat" id="countStat">Quotes: 0</div>
        <div class="stat" id="favStat">Favorites: 0</div>
        <div class="stat" id="tagsStat">Tags: —</div>
      </div>
    </div>

    <div style="height:12px"></div>

    <div class="card">
      <strong>Tips</strong>
      <ul style="color:var(--muted);margin-top:8px">
        <li>Use tags to group quotes (e.g., dev, story, lines-to-use).</li>
        <li>Export to back up or share. Import replaces your current set.</li>
        <li>Quotes are stored locally in your browser's storage.</li>
      </ul>
    </div>
  </div>

  <div class="right">
    <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:8px">
      <div style="color:var(--muted)">Showing <span id="visibleCount">0</span> quotes</div>
      <div>
        <button id="sortBtn" class="btn ghost">Sort: Newest</button>
        <button id="filterFavBtn" class="btn ghost">Show Favorites</button>
      </div>
    </div>

    <div class="grid" id="grid"></div>
  </div>
</main>

<footer>
  <div style="display:flex;justify-content:space-between">
    <div>Made for keeping your best lines. Local only (no server).</div>
    <div class="muted">Tip: press <kbd>n</kbd> to open the new quote editor.</div>
  </div>
</footer>

<!-- Hidden file input for import -->
<input type="file" id="fileInput" accept="application/json" style="display:none" />

<script>
  // Basic data model in localStorage
  const KEY = 'stellar_quotes_v1';
  let quotes = [];
  let showOnlyFav = false;
  let sortNewest = true;

  // UI elements
  const grid = document.getElementById('grid');
  const quoteText = document.getElementById('quoteText');
  const quoteAuthor = document.getElementById('quoteAuthor');
  const quoteTags = document.getElementById('quoteTags');
  const saveBtn = document.getElementById('saveBtn');
  const clearBtn = document.getElementById('clearBtn');
  const newBtn = document.getElementById('newBtn');
  const searchInput = document.getElementById('searchInput');
  const countStat = document.getElementById('countStat');
  const favStat = document.getElementById('favStat');
  const tagsStat = document.getElementById('tagsStat');
  const visibleCount = document.getElementById('visibleCount');
  const exportBtn = document.getElementById('exportBtn');
  const importBtn = document.getElementById('importBtn');
  const fileInput = document.getElementById('fileInput');
  const sortBtn = document.getElementById('sortBtn');
  const filterFavBtn = document.getElementById('filterFavBtn');

  // Utility
  function uid(){ return Date.now().toString(36) + Math.random().toString(36).slice(2,8); }
  function saveToStorage(){ localStorage.setItem(KEY, JSON.stringify(quotes)); }
  function loadFromStorage(){ try{ quotes = JSON.parse(localStorage.getItem(KEY)) || []; }catch(e){ quotes=[]; } }

  function updateStats(){
    countStat.textContent = 'Quotes: ' + quotes.length;
    favStat.textContent = 'Favorites: ' + quotes.filter(q=>q.fav).length;
    const tags = Array.from(new Set(quotes.flatMap(q => q.tags || [])));
    tagsStat.textContent = 'Tags: ' + (tags.length? tags.join(', ') : '—');
  }

  // Rendering
  function render(){
    grid.innerHTML = '';
    updateStats();

    let visible = quotes.slice();
    if (sortNewest) visible.sort((a,b)=>b.created - a.created);
    else visible.sort((a,b)=>a.created - b.created);

    const q = searchInput.value.trim().toLowerCase();
    if (q) visible = visible.filter(it => {
      return (it.text + ' ' + (it.author||'') + ' ' + (it.tags||[]).join(' ')).toLowerCase().includes(q);
    });

    if (showOnlyFav) visible = visible.filter(it => it.fav);

    visibleCount.textContent = visible.length;

    for (const it of visible){
      const el = document.createElement('div');
      el.className = 'quote-card';
      el.innerHTML = `
        <div class="quote-text">“${escapeHtml(it.text)}”</div>
        <div class="meta">
          <div>
            <div class="muted" style="font-size:13px">${escapeHtml(it.author || '')}</div>
            <div class="tags" style="margin-top:6px">${(it.tags||[]).slice(0,4).map(t=>`<span class="tag">${escapeHtml(t)}</span>`).join('')}</div>
          </div>
          <div class="card-actions">
            <button class="icon-btn fav-btn" title="Favorite"> ${it.fav? '★' : '☆'} </button>
            <button class="icon-btn copy-btn" title="Copy quote">⧉</button>
            <button class="icon-btn edit-btn" title="Edit">✎</button>
            <button class="icon-btn del-btn" title="Delete">🗑️</button>
          </div>
        </div>
      `;
      // attach handlers
      el.querySelector('.fav-btn').addEventListener('click', ()=>{
        it.fav = !it.fav; saveToStorage(); render();
      });
      el.querySelector('.copy-btn').addEventListener('click', ()=>{
        navigator.clipboard?.writeText(`"${it.text}" ${it.author? '— ' + it.author : ''}`).then(()=>{/*copied*/});
      });
      el.querySelector('.edit-btn').addEventListener('click', ()=>{
        quoteText.value = it.text;
        quoteAuthor.value = it.author || '';
        quoteTags.value = (it.tags || []).join(', ');
        saveBtn.textContent = 'Update Quote';
        saveBtn.dataset.editId = it.id;
        window.scrollTo({top:0,behavior:'smooth'});
      });
      el.querySelector('.del-btn').addEventListener('click', ()=>{
        if(confirm('Delete this quote?')) {
          quotes = quotes.filter(q => q.id !== it.id);
          saveToStorage(); render();
        }
      });

      grid.appendChild(el);
    }
  }

  // Escape helper
  function escapeHtml(s = ''){ return s.replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;'); }

  // Save / update
  saveBtn.addEventListener('click', ()=>{
    const text = quoteText.value.trim();
    if(!text){ alert('Quote text is empty'); return; }
    const author = quoteAuthor.value.trim();
    const tags = quoteTags.value.split(',').map(t=>t.trim()).filter(Boolean);
    const now = Date.now();

    if(saveBtn.dataset.editId){
      const id = saveBtn.dataset.editId;
      const idx = quotes.findIndex(q=>q.id===id);
      if(idx>=0){
        quotes[idx].text = text;
        quotes[idx].author = author;
        quotes[idx].tags = tags;
        quotes[idx].updated = now;
      }
      delete saveBtn.dataset.editId;
      saveBtn.textContent = 'Save Quote';
    } else {
      quotes.push({
        id: uid(),
        text,
        author,
        tags,
        fav: false,
        created: now,
        updated: now
      });
    }
    quoteText.value='';quoteAuthor.value='';quoteTags.value='';
    saveToStorage(); render();
  });

  clearBtn.addEventListener('click', ()=>{
    quoteText.value='';quoteAuthor.value='';quoteTags.value='';
    delete saveBtn.dataset.editId;
    saveBtn.textContent = 'Save Quote';
  });

  newBtn.addEventListener('click', ()=>{
    window.scrollTo({top:0,behavior:'smooth'});
    quoteText.focus();
  });

  searchInput.addEventListener('input', render);

  // keyboard shortcut: n to focus new
  window.addEventListener('keydown', (e)=>{
    if(e.key.toLowerCase()==='n' && document.activeElement.tagName !== 'INPUT' && document.activeElement.tagName !== 'TEXTAREA'){
      quoteText.focus();
      e.preventDefault();
    }
  });

  // export / import
  exportBtn.addEventListener('click', ()=>{
    const data = JSON.stringify(quotes, null, 2);
    const blob = new Blob([data], {type:'application/json'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url; a.download = 'stellar_quotes.json'; a.click();
    URL.revokeObjectURL(url);
  });

  importBtn.addEventListener('click', ()=> fileInput.click());
  fileInput.addEventListener('change', (e)=>{
    const f = e.target.files && e.target.files[0];
    if(!f) return;
    const reader = new FileReader();
    reader.onload = function(evt){
      try{
        const parsed = JSON.parse(evt.target.result);
        if(!Array.isArray(parsed)) throw new Error('Invalid format: expected array');
        // basic validation
        if(!confirm('Import will replace your current quotes. Continue?')) return;
        quotes = parsed.map(it => ({
          id: it.id || uid(),
          text: it.text || '',
          author: it.author || '',
          tags: it.tags || [],
          fav: !!it.fav,
          created: it.created || Date.now(),
          updated: it.updated || (it.created || Date.now())
        }));
        saveToStorage(); render();
      }catch(err){
        alert('Failed to import: ' + err.message);
      }
    };
    reader.readAsText(f);
    fileInput.value = '';
  });

  // sort/filter
  sortBtn.addEventListener('click', ()=>{
    sortNewest = !sortNewest;
    sortBtn.textContent = 'Sort: ' + (sortNewest? 'Newest' : 'Oldest');
    render();
  });
  filterFavBtn.addEventListener('click', ()=>{
    showOnlyFav = !showOnlyFav;
    filterFavBtn.textContent = showOnlyFav? 'Show All' : 'Show Favorites';
    render();
  });

  // initial load + sample quotes if empty
  loadFromStorage();
  if(!quotes || quotes.length===0){
    quotes = [
      { id: uid(), text: "Design systems are opinions embedded in code.", author: "—", tags:["design","dev"], fav:true, created:Date.now()-1000000, updated:Date.now()-1000000 },
      { id: uid(), text: "Iterate fast. Ship often. Learn faster.", author: "—", tags:["process","dev"], fav:false, created:Date.now()-500000, updated:Date.now()-500000 }
    ];
    saveToStorage();
  }
  render();
</script>

</body>
</html>
